!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){var n=o(1),r=o(3),a=o(2),i={};i.connectorLoad=n,i.imageLoad=r,i.cssLoad=a,window.Preload=i},function(e,t,o){var n=function(e){"use strict";this.opts={isDebug:!1,connector:null,completeLoad:function(){}},this.params={_createXHR:null,id:0,count:0,head:document.getElementsByTagName("head")[0]};for(var t in e)this.opts[t]=e[t];this._init()};n.prototype={_init:function(){var e=this,t=e.opts,o=e.params;null!=t.connector&&(o._createXHR=e.getXHR(),o.count=Object.getOwnPropertyNames(t.connector).length,e._getData())},_getData:function(){var e=this,t=e.opts;e.params;for(var o in t.connector)t.connector[o].url||e.throwIf(o+"队列URL不存在"),t.connector[o].jsonp?e.asynGetData(t.connector[o]):e.syncGetData(t.connector[o])},syncGetData:function(e){var t=this,o=this.params,n=e.url||"",r=e.type.toLocaleUpperCase(),a=e.data||{},i=t.getTimeOut(e.loadingOverTime,e.loadingOverTimeCB);"GET"!==r&&"POST"!==r&&(r="GET"),o._createXHR.onreadystatechange=function(){4==o._createXHR.readyState&&(clearTimeout(i),o._createXHR.status>=200&&o._createXHR.status<300||304===o._createXHR.status?e.success(o._createXHR.responseText):(t.throwIf("对"+n+"请求失败，状态码为："+o._createXHR.status),e.error(o._createXHR)),t.isCompleteAllLoad())},n="POST"==r?n:n+"?"+t.getQueryString(a),o._createXHR.open(r,n,e.async||!0),o._createXHR.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o._createXHR.send("POST"==r?t.getQueryString(a):null)},asynGetData:function(e){var t=this,o=this.params,n=e.url||"",r=e.loadingOverTime||12,a=e.loadingOverTimeCB||function(){},i=t.getTimeOut(r,a);n+=(/\?/.test(n)?"&":"?")+"_="+Date.parse(new Date);var c=document.createElement("script");c.src=n,o.head.appendChild(c),c.onload=function(){clearTimeout(i),o.head.removeChild(c),t.isCompleteAllLoad()}},getXHR:function(){return"undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:void throwIf("only Support IE9+")},getTimeOut:function(e,t){return setTimeout(function(){t()},1e3*e)},throwIf:function(e){var t=this.opts,e=e||"未知错误";return t.isDebug?void alert(e):void 0},getQueryString:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},isCompleteAllLoad:function(){var e=this,t=e.opts,o=e.params;++o.id>=o.count&&t.completeLoad()}},e.exports=n},function(e,t,o){"use strict";var n=function(e,t,o){function n(e){return a.body?e():setTimeout(function(){n(e)})}var r=function(e){for(var t=c.href,o=i.length;o--;)if(i[o].href===t)return e();setTimeout(function(){r(e)})},a=window.document,i=a.styleSheets,c=a.createElement("link"),o=o||"all";if(c.rel="stylesheet",c.href=e,c.media=o,!t){var s=(a.getElementsByTagName("head")[0]||a.body).childNodes;t=s[s.length-1]}n(function(){t.parentNode.insertBefore(c,t?t:t.nextSibling)}),c.addEventListener&&c.addEventListener("load",function(e){if(navigator.userAgent.toLowerCase().match(/firefox/)){var o=a.createElement("script");t.parentNode.insertBefore(o,t?t:t.nextSibling)}}),c.onloadcssdefined=r,r(function(){c.media!==o&&(c.media=o)})};e.exports=n},function(e,t,o){"use strict";var n=function(e){this.opts={isDebug:!1,sources:null,progress:function(){},completeLoad:function(){},config:{timeOut:e.loadingOverTime||15,timeOutCB:e.loadingOverTimeCB||function(){}}},this.params={echetotal:0,echelon:[],echelonlen:[],echeloncb:[],id:0,flag:0,allowType:["jpg","jpeg","png","gif"],total:0,completedCount:0,imgNode:[],imgNodePSrc:[]};for(var t in e)this.opts[t]=e[t];this._init()};n.prototype={_init:function(){var e=this,t=(e.opts,e.params);e._initData(),e.loadEcho(t.echelon[0])},_initData:function(){var e=this,t=e.opts,o=e.params;if(null!==t.sources){for(var n in t.sources){for(var r=[],a=0,i=t.sources[n].source.length;i>a;a++)r.push(t.sources[n].source[a]);o.total+=1*i,o.echelonlen.push(t.sources[n].source.length),o.echelon.push(r),o.echeloncb.push("undefined"==typeof t.sources[n].callback?null:t.sources[n].callback)}for(var n=1,i=o.echelonlen.length;i>n;n++)o.echelonlen[n]=o.echelonlen[n-1]+o.echelonlen[n];o.imgNode=document.getElementsByTagName("img");for(var n=0,i=o.imgNode.length;i>n;n++)o.imgNode[n].attributes.pSrc&&(o.imgNodePSrc[n]=o.imgNode[n].attributes.pSrc.value)}},loadEcho:function(e){for(var t=this,o=(t.opts,t.params,0),n=e.length;n>o;o++)t.load(e[o])},load:function(e){var t=this,o=t.opts,n=t.params;if(t.isImg(e)){var r=new Image,a=setTimeout(function(){o.config.timeOutCB()},1e3*o.config.timeOut);r.src=e,r.onload=function(){clearTimeout(a),o.progress(++n.completedCount,n.total);for(var r=0,i=n.imgNodePSrc.length;i>r;r++)if(n.imgNodePSrc[r]==e){n.imgNode[r].src=n.imgNodePSrc[r];break}t.next()},r.onerror=function(){o.progress(++n.completedCount,n.total),t.next()}}else t.throwIf("使用未允许类型图片或非图片类型"),o.progress(++n.completedCount,n.total)},next:function(){var e=this,t=e.opts,o=e.params;if(o.completedCount>=o.echelonlen[o.flag]){if(null!=o.echeloncb[o.flag]&&o.echeloncb[o.flag](),++o.flag,!o.echelon[o.flag])return void t.completeLoad();e.loadEcho(o.echelon[o.flag])}},isImg:function(e){for(var t=this,o=(t.opts,t.params),n=e.split(".").pop(),r=0,a=o.allowType.length;a>r;r++)if(n==o.allowType[r])return!0;return!1},throwIf:function(e){var t=this.opts,e=e||"未知错误";return t.isDebug?void alert(e):void 0}},e.exports=n}]);